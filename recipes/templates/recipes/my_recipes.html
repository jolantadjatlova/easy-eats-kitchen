{% extends "recipes/base.html" %}
{% load static %}

{% block content %}
<div class="container my-4">

  <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-3">
    <h1 class="mb-2 mb-md-0">My Recipes</h1>
    <a class="btn" href="{% url 'recipes:add_recipe' %}" style="background-color:#3a2f29;color:#f5f1eb;">
      + Add recipe
    </a>
  </div>

  <p class="text-muted">Only registered users can see this page</p>

  <div class="accordion" id="myRecipesAccordion">
    {% for r in recipes %}
      <div class="accordion-item mb-3">
        <h2 class="accordion-header" id="myHeading{{ r.id }}">
          <button
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#myCollapse{{ r.id }}"
            aria-expanded="false"
            aria-controls="myCollapse{{ r.id }}"
          >
            {{ r.title }}
          </button>
        </h2>

        <div
          id="myCollapse{{ r.id }}"
          class="accordion-collapse collapse"
          aria-labelledby="myHeading{{ r.id }}"
          data-bs-parent="#myRecipesAccordion"
        >
          <div class="accordion-body">
            <div class="row g-3 align-items-start">

              <!-- Image -->
              <div class="col-12 col-md-3 text-center">
                <img
                  src="{% static r.image %}"
                  alt="{{ r.title }}"
                  class="img-fluid rounded-circle"
                  style="max-width: 140px;"
                />
              </div>

              <!-- Ingredients -->
              <div class="col-12 col-md-4">
                <h3 class="h5">Ingredients</h3>
                <ul class="mb-0">
                  {% for item in r.ingredients %}
                    <li>{{ item }}</li>
                  {% endfor %}
                </ul>
              </div>

              <!-- Method -->
              <div class="col-12 col-md-5">
                <h3 class="h5">Method</h3>
                <ol class="mb-3">
                  {% for step in r.method %}
                    <li>{{ step }}</li>
                  {% endfor %}
                </ol>

                <div class="d-flex gap-2">
                  <a class="btn btn-outline-secondary btn-sm" href="#">
                    Edit
                  </a>
                  <a class="btn btn-outline-danger btn-sm" href="#">
                    Delete
                  </a>
                </div>

              </div>

            </div>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="alert alert-info">
        You havenâ€™t added any recipes yet. Click <strong>Add recipe</strong> to create your first one.
      </div>
    {% endfor %}
  </div>

</div>
{% endblock %}